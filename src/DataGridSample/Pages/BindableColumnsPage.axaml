<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:dg="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.BindableColumnsPage"
             x:DataType="viewModels:BindableColumnsViewModel">
  <UserControl.DataContext>
    <viewModels:BindableColumnsViewModel/>
  </UserControl.DataContext>

  <Grid RowDefinitions="Auto,Auto,*" ColumnDefinitions="*"
        Margin="12" RowSpacing="10">
    <StackPanel Spacing="4">
      <TextBlock Classes="h2">Bindable Columns</TextBlock>
      <TextBlock Text="Bind the DataGrid.Columns collection directly to an ObservableCollection&lt;DataGridColumn&gt; with one-way or two-way synchronization. Toggle auto-generated placement to see generated columns appear before/after the bound columns, or suppressed entirely."
                 TextWrapping="Wrap" />
    </StackPanel>

    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="12">
      <StackPanel Spacing="4">
        <TextBlock Classes="caption">Sync mode</TextBlock>
        <ComboBox ItemsSource="{Binding SyncModes}" SelectedItem="{Binding ColumnsSyncMode}" MinWidth="160"/>
      </StackPanel>
      <StackPanel Spacing="4">
        <TextBlock Classes="caption">Reset behavior</TextBlock>
        <ComboBox ItemsSource="{Binding ResetBehaviors}" SelectedItem="{Binding ColumnsResetBehavior}" MinWidth="180"/>
      </StackPanel>
      <StackPanel Spacing="4">
        <TextBlock Classes="caption">Auto-generated placement</TextBlock>
        <ComboBox ItemsSource="{Binding AutoPlacements}" SelectedItem="{Binding AutoGeneratedPlacement}" MinWidth="200"/>
      </StackPanel>
      <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" Spacing="6">
        <Button Content="Preset A (Name columns)" Command="{Binding SetPresetACommand}" />
        <Button Content="Preset B (Name + Status)" Command="{Binding SetPresetBCommand}" />
        <Button Content="Add extra column" Command="{Binding AddColumnCommand}" />
        <Button Content="Remove last column" Command="{Binding RemoveLastColumnCommand}" />
        <Button Content="Move last to first" Command="{Binding MoveLastToFirstCommand}" />
      </StackPanel>
    </StackPanel>

    <Grid Grid.Row="2" ColumnDefinitions="2*,*" ColumnSpacing="12">
      <DataGrid ItemsSource="{Binding Items}"
                Columns="{Binding Columns}"
                ColumnsSynchronizationMode="{Binding ColumnsSyncMode}"
                ColumnsSourceResetBehavior="{Binding ColumnsResetBehavior}"
                AutoGeneratedColumnsPlacement="{Binding AutoGeneratedPlacement}"
                AutoGenerateColumns="True"
                CanUserReorderColumns="True"
                CanUserResizeColumns="True"
                HeadersVisibility="All"
                Height="460"
                IsReadOnly="True" />

      <StackPanel Grid.Column="1" Spacing="6">
        <TextBlock Classes="h3" Text="Bound column order" />
        <ItemsControl ItemsSource="{Binding ColumnPreviews}">
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="viewModels:BindableColumnsViewModel+ColumnPreview">
              <Border Margin="0,0,0,6" Padding="6"
                      BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                      BorderThickness="1" CornerRadius="4">
                <StackPanel Orientation="Horizontal" Spacing="12">
                  <TextBlock Text="{Binding Header}" />
                  <TextBlock Text="{Binding Path}" Classes="caption" />
                  <TextBlock Text="{Binding ColumnType}" Classes="caption" />
                </StackPanel>
              </Border>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </StackPanel>
    </Grid>
  </Grid>
</UserControl>
