<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:columns="clr-namespace:DataGridSample.Columns"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.ColumnThemesPage"
             x:DataType="viewModels:ColumnThemesViewModel">
  <UserControl.DataContext>
    <viewModels:ColumnThemesViewModel />
  </UserControl.DataContext>

  <UserControl.Resources>
    <ControlTheme x:Key="DataGridCellCheckBoxTheme"
                  TargetType="CheckBox"
                  BasedOn="{StaticResource {x:Type CheckBox}}">
      <Setter Property="Foreground" Value="#0B1224" />
      <Setter Property="BorderBrush" Value="#22C55E" />
      <Setter Property="Background" Value="#D1FAE5" />
      <Setter Property="Padding" Value="6" />
    </ControlTheme>

    <ControlTheme x:Key="DataGridCellComboBoxTheme"
                  TargetType="ComboBox"
                  BasedOn="{StaticResource {x:Type ComboBox}}">
      <Setter Property="Background" Value="#0F172A" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="BorderBrush" Value="#A855F7" />
      <Setter Property="Padding" Value="6,4" />
    </ControlTheme>

    <ControlTheme x:Key="DataGridCellComboBoxDisplayTheme"
                  TargetType="ComboBox"
                  BasedOn="{StaticResource {x:Type ComboBox}}">
      <Setter Property="Foreground" Value="#0B1224" />
      <Setter Property="Background" Value="#E0F2FE" />
      <Setter Property="BorderBrush" Value="#38BDF8" />
      <Setter Property="Padding" Value="4,2" />
    </ControlTheme>

    <ControlTheme x:Key="DataGridCellHyperlinkButtonTheme"
                  TargetType="HyperlinkButton"
                  BasedOn="{StaticResource {x:Type HyperlinkButton}}">
      <Setter Property="Foreground" Value="#2563EB" />
      <Setter Property="TextBlock.TextDecorations" Value="Underline" />
      <Setter Property="Padding" Value="0" />
    </ControlTheme>

    <ControlTheme x:Key="DataGridCellTextBoxTheme"
                  TargetType="TextBox"
                  BasedOn="{StaticResource {x:Type TextBox}}">
      <Setter Property="Background" Value="#111827" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="SelectionBrush" Value="#38BDF8" />
      <Setter Property="BorderBrush" Value="#818CF8" />
      <Setter Property="Padding" Value="10,6" />
    </ControlTheme>

    <ControlTheme x:Key="DataGridCellTextBlockTheme"
                  TargetType="TextBlock"
                  BasedOn="{StaticResource {x:Type TextBlock}}">
      <Setter Property="Foreground" Value="#0B1224" />
      <Setter Property="FontWeight" Value="SemiBold" />
      <Setter Property="TextWrapping" Value="Wrap" />
    </ControlTheme>
  </UserControl.Resources>

  <Grid RowDefinitions="Auto,Auto,*"
        RowSpacing="12"
        Margin="12">
    <StackPanel Spacing="4">
      <TextBlock Classes="h2">Themed column accessors</TextBlock>
      <TextBlock Text="CheckBox, ComboBox, Hyperlink, and Text columns now expose protected cell theme accessors so derived columns can reuse grid-level themes without duplicating lookups."
                 TextWrapping="Wrap" />
    </StackPanel>

    <StackPanel Grid.Row="1"
                Orientation="Horizontal"
                Spacing="8">
      <Button Content="Shuffle statuses"
              Command="{Binding ShuffleStatusesCommand}" />
      <Button Content="Shuffle links"
              Command="{Binding ShuffleLinksCommand}" />
    </StackPanel>

    <DataGrid Grid.Row="2"
              x:Name="Grid"
              ItemsSource="{Binding Rows}"
              AutoGenerateColumns="False"
              HeadersVisibility="All"
              CanUserAddRows="False"
              CanUserDeleteRows="False"
              Height="480"
              RowDetailsVisibilityMode="VisibleWhenSelected">
      <DataGrid.Columns>
        <columns:ThemedCheckBoxColumn Header="Done"
                                      Binding="{Binding Done}"
                                      Width="80"
                                      x:DataType="viewModels:ThemedRow" />
        <columns:ThemedComboBoxColumn Header="Status"
                                      ItemsSource="{Binding #Grid.((viewModels:ColumnThemesViewModel)DataContext).StatusOptions}"
                                      SelectedItemBinding="{Binding Status}"
                                      Width="140"
                                      x:DataType="viewModels:ThemedRow" />
        <columns:ThemedHyperlinkColumn Header="Link"
                                       Binding="{Binding Target}"
                                       ContentBinding="{Binding Label}"
                                       Width="200"
                                       x:DataType="viewModels:ThemedRow" />
        <columns:AccentTextColumn Header="Notes"
                                  Binding="{Binding Notes}"
                                  Width="*"
                                  x:DataType="viewModels:ThemedRow" />
      </DataGrid.Columns>
      <DataGrid.RowDetailsTemplate>
        <DataTemplate x:DataType="viewModels:ThemedRow">
          <TextBlock Margin="12,4,12,10"
                     Text="{Binding Notes}"
                     TextWrapping="Wrap"
                     Opacity="0.8" />
        </DataTemplate>
      </DataGrid.RowDetailsTemplate>
    </DataGrid>
  </Grid>
</UserControl>
