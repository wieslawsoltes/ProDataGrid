<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:DataGridSample.Models"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.PagingSelectionPage"
             x:DataType="viewModels:PagingSelectionViewModel">
  <UserControl.DataContext>
    <viewModels:PagingSelectionViewModel/>
  </UserControl.DataContext>

  <Grid RowDefinitions="Auto,Auto,*" ColumnDefinitions="2*,*" Margin="12" ColumnSpacing="12" RowSpacing="10">
    <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Spacing="4">
      <TextBlock Classes="h2">Paging with persistent selection</TextBlock>
      <TextBlock Text="DataGridCollectionView paging with a shared SelectionModel. Pick rows across pages and watch the selection persist while you move between pages."
                 TextWrapping="Wrap" />
    </StackPanel>

    <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Spacing="6">
      <Button Content="First" Command="{Binding FirstPageCommand}" />
      <Button Content="Previous" Command="{Binding PreviousPageCommand}" />
      <TextBlock VerticalAlignment="Center" Text="{Binding PageStatus}" />
      <Button Content="Next" Command="{Binding NextPageCommand}" />
      <Button Content="Last" Command="{Binding LastPageCommand}" />
      <StackPanel Orientation="Horizontal" Spacing="4" Margin="16,0,0,0" VerticalAlignment="Center">
        <TextBlock Text="Page size:" VerticalAlignment="Center" />
        <TextBox Width="48" Text="{Binding PageSize, UpdateSourceTrigger=PropertyChanged}"/>
      </StackPanel>
    </StackPanel>

    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Spacing="6" HorizontalAlignment="Right">
      <Button Content="Select across pages" Command="{Binding SelectAcrossPagesCommand}" />
      <Button Content="Clear selection" Command="{Binding ClearSelectionCommand}" />
      <TextBlock VerticalAlignment="Center" Text="{Binding SelectionSummary}" />
    </StackPanel>

    <Grid Grid.Row="2" Grid.Column="0" ColumnDefinitions="*" RowDefinitions="Auto,*" RowSpacing="6">
      <TextBlock Text="Countries (paged)" />
      <DataGrid Grid.Row="1"
                ItemsSource="{Binding ItemsView}"
                Selection="{Binding SelectionModel}"
                SelectionMode="Extended"
                AutoGenerateColumns="True"
                HeadersVisibility="All"
                Height="450" />
    </Grid>

    <StackPanel Grid.Row="2" Grid.Column="1" Spacing="8">
      <TextBlock Classes="h3" Text="Selected items (all pages)" />
      <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
              BorderThickness="1" CornerRadius="4" Padding="4">
        <ItemsControl ItemsSource="{Binding SelectedItems}">
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="models:Country">
              <StackPanel Orientation="Horizontal" Spacing="6">
                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                <TextBlock Text="{Binding Region}" />
              </StackPanel>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </Border>
    </StackPanel>
  </Grid>
</UserControl>
