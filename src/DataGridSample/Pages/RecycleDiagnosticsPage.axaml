<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:DataGridSample.Models"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.RecycleDiagnosticsPage"
             x:DataType="viewModels:RecycleDiagnosticsViewModel">
  <UserControl.DataContext>
    <viewModels:RecycleDiagnosticsViewModel />
  </UserControl.DataContext>

  <Grid RowDefinitions="Auto,*" ColumnDefinitions="Auto,*" Margin="0">
    <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Spacing="6" Margin="0,0,0,8">
      <TextBlock Classes="h2" Text="Resize recycling diagnostics" />
      <TextBlock TextWrapping="Wrap"
                 Text="Resize the window (maximize/restore) and watch the realized vs recycled row counts. The recycle pool should shrink back to the small viewport budget after restoring." />
      <Grid ColumnDefinitions="*,Auto" VerticalAlignment="Center">
        <StackPanel Orientation="Horizontal" Spacing="12">
          <TextBlock Text="Realized rows:" />
          <TextBlock FontWeight="Bold" Text="{Binding RealizedRows}" />
          <TextBlock Text="Recycled rows:" />
          <TextBlock FontWeight="Bold" Text="{Binding RecycledRows}" />
          <TextBlock Text="Viewport height:" />
          <TextBlock FontWeight="Bold" Text="{Binding ViewportHeight,StringFormat=0.0}" />
        </StackPanel>
        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12" HorizontalAlignment="Right">
          <CheckBox Content="Trim recycle pool"
                    IsChecked="{Binding TrimRecycledContainers}" />
          <CheckBox Content="Keep recycled in visual tree"
                    IsChecked="{Binding KeepRecycledContainersInVisualTree}" />
          <ComboBox Width="200"
                    ItemsSource="{Binding RecycleHidingModes}"
                    SelectedItem="{Binding RecycledContainerHidingMode}" />
        </StackPanel>
      </Grid>
    </StackPanel>

    <DataGrid x:Name="DiagnosticGrid"
              Grid.Row="1"
              Grid.ColumnSpan="2"
              ItemsSource="{Binding Items}"
              TrimRecycledContainers="{Binding TrimRecycledContainers}"
              KeepRecycledContainersInVisualTree="{Binding KeepRecycledContainersInVisualTree}"
              RecycledContainerHidingMode="{Binding RecycledContainerHidingMode}"
              UseLogicalScrollable="True"
              HeadersVisibility="All"
              GridLinesVisibility="Horizontal"
              RowBackground="#08000000">
      <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="80" x:DataType="models:PixelItem" />
        <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="3*" x:DataType="models:PixelItem" />
        <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="2*" x:DataType="models:PixelItem" />
        <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="5*" x:DataType="models:PixelItem" />
        <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="3*" x:DataType="models:PixelItem" />
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</UserControl>
